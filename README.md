# telemetry-daemon

## Overview:

  The project is build from 2 parts: server and a library that exposes the server functionality.  
  It allows users to:  
  - send short messages in channels (under 1024 bytes)
  - read the last message sent in a channel.
  - register a callback function to be called everytime a message is sent in a channel.  
  <a/>
  The channels are organized in a tree structure. (When you send a message to a channel you also send it to it's childrens) <br>
  Example: if you send a message to /channel/aaa it will also be sent to channel/aaa/a and channel/aaa/b but it won't be sent to channel/bbb

## How it works:
  The project works in a server-client arhitecture. The server is getting requests from clients, process them and then send the response to the client.  
  For the request and response queues we are using named pipes (temporary name autogenerated).  
  The server is sending the name of the pipe where it receives the requests using a UDP IPv4 connection on 127.0.0.1:5000  
  There are 5 types of operations:  
   - registerUser : register the user to the given channel with the given role and returns his id back (it will be used for the other requests) 
   - post : send a message to the channel the given user is subscribed to
   - read : read the current message in the channel the user is subscribed to
   - registerCallback : sets the Callback function that will be called when a message will be sent to the channel of the user.
   - deleteUser : deletes the user.

## How to run:
  Cd into src directory:
  ```
  cd src
  ```
  
  Right now the project requires the gcc compiler.
  The library + main code will be compiled with:
  ```
  gcc main.c API/API.c parseresponse.c -pthread -o main
  ```
  The server code will be compiled with:
  ```
  gcc server.c parserequest.c daemon.c demonize.c -pthread -o server
  ```
  Note: The server is a daemon. (After it starts it will run in the background of your pc until you stop it or until you restart the system.



